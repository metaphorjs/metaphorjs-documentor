
<div class="navbar navbar-expand navbar-dark bg-dark fixed-top" 
        role="navigation"
        {if}="!this.pageOptions.hideTopMenu"
        {class.fixed-top}="!this.multipage">

    <a class="navbar-brand" 
        [href]=".topTitleLink || '#'" 
        {bind}=".topTitle || .title"></a>

    <mjs-if value="this.$app.hasNav('top-menu')">

    <button class="navbar-toggler" type="button" 
            data-toggle="collapse" 
            data-target="#navbarToggler1" 
            aria-controls="navbarToggler1" 
            aria-expanded="false" 
            aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse">

        <ul class="navbar-nav">
            <li class="nav-item dropdown" 
                {each}="section in .sourceTree.structure | toArray | navFilter:'top-menu'">
                <a href="#" 
                    {init}="this.open = false"
                    (click)="this.open = !this.open"
                    (blur)="this.open = !this.open"
                    (blur.$async)="200"
                    class="nav-link dropdown-toggle" 
                    data-toggle="dropdown"
                    role="button">
                    <span {bind}=".section.value.groupName"></span>
                    <span class="caret"></span>
                </a>
                <div class="dropdown-menu" role="menu" 
                    {show}="this.open" 
                    {show.$display}="block">
                    <div class="dropdown-item" 
                        {each}="item in .section.value.children"
                        {include}="top-menu.entry"></div>
                </div>
            </li>
        </ul>
        <!--
        <ul class="navbar-nav navbar-right"
            {if}=".hasOwnProperty('topRightMenu')">
            <li class="nav-item" 
                {each}="item in .topRightMenu">
                <a class="nav-link" 
                    [href]=".item.href" 
                    {bind}=".item.name"></a>
            </li>
        </ul>-->

    </div><!--/.nav-collapse -->
    </mjs-if> <!-- hasNav -->
</div>
